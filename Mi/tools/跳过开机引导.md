```py
import subprocess
import time

def run_adb_command(command, description, device_serial=None):
    """运行 ADB 命令，并打印执行信息。"""
    if device_serial:
        command = f"adb -s {device_serial} {command}"
    print(f"[{device_serial}] 执行: {description}...")
    try:
        result = subprocess.run(command, shell=True, capture_output=True, text=True)
        output = result.stdout.strip()
        print(f"[{device_serial}] {description} 完成: {output if output else '无输出'}")
    except Exception as e:
        print(f"[{device_serial}] 执行 {description} 时出错: {e}")
        return None

def get_connected_devices():
    """获取所有已连接的设备序列号列表"""
    result = subprocess.run("adb devices", shell=True, capture_output=True, text=True)
    lines = result.stdout.strip().split("\n")[1:]  # 跳过第一行
    devices = [line.split("\t")[0] for line in lines if "device" in line]
    return devices

def configure_device(device_serial):
    """对特定设备执行 ADB 配置"""
    run_adb_command("wait-for-device", "等待设备连接", device_serial)
    run_adb_command("shell setprop persist.vendor.ssr.restart_level  ALL_DISABLE", "关闭子系统重启", device_serial)
    run_adb_command("shell settings put global systemui_keyguard_whitelist -1266261377", "设置系统 UI 锁屏白名单", device_serial)
    run_adb_command("shell settings put global systemui_float_whitelist -196939687", "设置浮动窗口白名单", device_serial)
    run_adb_command("shell settings put global miui_permission_check 3", "设置 MIUI 权限检查", device_serial)
    run_adb_command("shell settings put global miui_account_login_check 0", "关闭 MIUI 账号登录检查", device_serial)
    run_adb_command("shell settings put global device_provisioned 1", "设备已配置", device_serial)
    run_adb_command("shell settings put global miui_pre_version_otaprovision 140", "设置 MIUI 预版本 OTA 配置", device_serial)
    run_adb_command("shell settings put secure auto_download 0", "禁用自动下载", device_serial)
    run_adb_command("shell settings put secure auto_update 0", "禁用自动更新", device_serial)

    # 亮屏
    run_adb_command("shell input keyevent 26", "亮屏", device_serial)
    time.sleep(2)

    # 检查设备配置状态
    device_provisioned = run_adb_command("shell settings get global device_provisioned", "检查设备配置状态", device_serial)
    
    # 重启设备
    run_adb_command("reboot", "重启设备", device_serial)
    print(f"[{device_serial}] Android 设备设置已更新并重启。\n")

if __name__ == "__main__":
    devices = get_connected_devices()
    
    if not devices:
        print("未检测到任何连接的 Android 设备。")
    else:
        print(f"检测到 {len(devices)} 台设备: {devices}")
        for device in devices:
            print(f"\n开始配置设备 [{device}]...")
            configure_device(device)
        print("所有设备已配置完成。")
```

